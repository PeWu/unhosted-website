<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <meta name="description" content="weekly handbook about unhosted web apps" />
    <title>unhosted web apps 8: your data</title>
    <link rel="stylesheet" href="/adventures/hljs/default.min.css" />
    <link rel="hub" href="http://pubsubhubbub.appspot.com/"/>
    <link rel="updates alternate" type="application/atom+xml" href="/adventures/feed.atom" />
    <link rel="author" type="text/html" href="http://michielbdejong.com/"/>
    <meta name="monetization" content="$twitter.xrptipbot.com/michielbdejong" />

    <script src="/adventures/hljs/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="/adventures/adventures.css" />
  </head>

  <body>
    <article>
      <header>
        <h1>unhosted web apps</h1>
        <h2>freedom from web 2.0's monopoly platforms</h2>
      </header>
      
      <h2>8. Collecting and organizing your data</h2>

      <p>(<a href="http://unhosted.bencharp.com/page/8-vos-donnees,8.html">en Fran&#231;ais</a>)</p>
<p>As a member of the No Cookie Crew you will be using unhosted web apps for everything you currently use hosted web apps for.
None of these apps will store your user data, because they do not have a server backend to store it on. You will have to
store your data yourself.</p>
<p>Collecting and organizing your own data is quite a bit of work, depending on how organized you want to be about it.
This work was usually done by the developers and system administrators of the hosted web apps you have been using.
The main task is to "tidy your room", like a kid putting all the toys back in the right storage place inside their bedroom.</p>

<h3>Collecting your data from your own backups</h3>
<p>We sometimes like to pretend that the Chromebook generation is already here, and that all our data is in the cloud. In reality,
obviously, a lot of our data is still just on our laptop hard disk, on external hard disks, on USB sticks, and on DVDs that we
created over the years.</p>
<p>The first step towards making this data usable with unhosted web apps is to put it all together in one place. When I started
doing this, I realised I have roughly four types of data, if you split it by the reason why I'm keeping it:</p>
<ul>
  <li>Souvenirs: mainly folders with photos, and videos. I hardly ever access these, but at the same time they are in a way
    the most valuable, since they are unique and personal, and represent powerful memories.</li>
  <li>Products: things I published in the past, like for instance papers I wrote as a student, code I published over the years,
    and the content of my website. In several cases I have source files that were not published as such, for instance original
    vector graphics files of designs that were published only as raster images, or screen-printed onto a T-shirt. It's all the original raw copies
    of the things that took me some effort to create, and that I may want to reuse in the future.</li>
  <li>Media Cache: my music collection, mostly. It used to be that when you lost a CD, you could no longer listen to it, but for
    all but the most obscure and rare albums, this is no longer the case, and should you lose this data, then it's easy to get
    it back from elsewhere. The only reason you cache it is basically so that you don't have to stream it.</li>
  <li>Working Set: the files I open and edit most often, but that are part of a product that is not finished yet, or that
    (unlike souvenirs) have only a temporary relevance.</li>
</ul>
<p>Most work goes into pruning the ever growing Working Set: determining which files and folders can be safely deleted (or moved
to the "old/" folder), archiving all the source files of products I've published, and deciding which souvenirs to keep and which
ones really are just more of the same.</p>
<p>My "to do" list and calendar clearly fit into "Working Set", but the one thing that doesn't really fit into any of this is my address
book. It is at the same time part of my working set, my products, and my souvenirs. I use it on a daily basis, but many contacts
in there are from the past, and I only keep them just in case some day I want to reuse those contacts for a new project, and of course
there is also a nostalgic value to an address book.</p>

<h3>Some stuff on your Indie Web server, the rest on your FreedomBox server</h3>
<p>At first, we had the idea of putting all this data of various types into one remoteStorage account. This idea quickly ran into three
problems: first, after scanning in all my backup DVDs, even after removing all the duplicate folders, I had gathered about 40 Gigs, and my
server only has 7 Gigs of disk space. It is possible to get a bigger server of course, but this didn't seem like an efficient thing to
spend money on, especially for the Media Cache data.</p>
<p>Second, I am often in places with limited bandwidth, and even if I would upload 40 Gigs to my remote server, it would still be a waste
of resources to try to stream music from there for hours on end.</p>
<p>Third, even though I want to upload my photos to a place where I can share them with friends, I have a lot of my photos in formats
that take up several Megabytes, and typically photos you share online would probably be more around 50 K for good online browsing
performance. So even if I upload all my photos to my Indie Web server, I would want to upload the "web size" version of them, and not
the huge originals.</p>
<p>After some discussion with Basti and Fran√ßois, I concluded that having one remote storage server is not enough to cover all use
cases: you need two. The "Indie Web" one should be always on, on a public domain name, and the "FreedomBox" one should be in your home.</p>
<p>On your Indie Web server, you would store only a copy of your Working Set data,
plus probably sized down derivatives of some of your products and
souvenirs. On your FreedomBox you would simply store everything.</p>
<p>This means you will already have to do some manual versioning, probably, and think about when to upload something to your Indie Web
server. At some point we will probably want to build publishing apps that connect to both accounts and take care of this, but for now, since
  we have webshell access to both servers, we can do this with a simple <code>scp</code> command.</p>

<h3>FreedomBox and the remoteStorage-stick</h3>
<p>The topic of having a data server in your home brought up the work Markus and I did on combining the
  <a href="http://freedomboxfoundation.org/">FreedomBox</a> with remoteStorage. Our idea was to split the FreedomBox into the actual plug
  server and a USB drive that you stick into it, for the data storage. The two reasons for splitting the device this way are that it makes it
  clear to the user where their data is and how they can copy it and back it up, and that it makes tech support easier, since the device contains
  no valuable data, and can thus easily be reset to factory settings.</p>
<p>To allow this FreedomBox to also serve a public website, we would sell a package containing:</p>
<ul>
  <li>the plug server</li>
  <li>the 'remoteStorage-stick'</li>
  <li>a <a href="https://pagekite.net/">Pagekite</a> account to tunnel through</li>
  <li>a TLS certificate for end-to-end encryption</li>
  <li>tokens for flattering unhosted web apps in the 5apps store</li>
</ul>
<p>There is still a long way to go to make this a sellable product, but it doesn't hurt to start experimenting with its architecture ourselves
  first, which is why I bought a usb drive, formatted it as ext4 with encryption, and mounted it as my 'remoteStorage' stick. It's one of those
  tiny ones that have the hardware built into the connector and don't stick out, so I leave it plugged in to my laptop by default.</p>

<h3>Putting your data into your remoteStorage server</h3>
<p>By way of FreedomBox prototype, I installed ownCloud on my localhost and pointed a 'freedombox' domain to 127.0.0.1 in my <code>/etc/hosts</code>.
To make your data available through a remoteStorage API, install one of the remoteStorage-compatible personal data servers listed under 'host your own storage'
  on <a href="http://remotestorage.io/get/">remotestorage.io/get/</a>. I went for the ownCloud one here, because (like the php-remoteStorage one) it maps data
  directly onto the filesystem (it
uses extended attributes to store the Content-Types). Nowadays you would probably go for
<a href="https://github.com/jcoglan/restore">reStore</a> instead, because it's easier to get working. If you just want to get started quickly with remoteStorage, try the <a href="https://github.com/remotestorage/starter-kit">starter-kit</a>. This means you can just import data onto your remoteStorage account by copying it onto your
  remoteStorage-stick. Do make sure your remoteStorage-stick is formatted with a filesystem that supports extended file attributes.</p>

<h3>Export your data from Google, Facebook and Twitter</h3>
<p><em><strong>No Cookie Crew  - Warning #5:</strong> You will have to log in to these services now, because apart from Twitter, they do not offer this same
  functionality through their APIs.</em></p>

<p>This part is quite fun: Data Liberation! :) It is actually quite easy to download all your data from Google. This is what it looks like:</p>
  <img src="google.png" />

<p>Facebook offers a similar service, even though the contacts export is quite rudimentary, but you can export at least your photos:</p>
<img src="facebook.png" />

<p>And this is what the LinkedIn one looks like:</p>
<img src="linkedin.png" />

<p>For twitter, tweet data is mostly transient, so there is not much point probably in exporting that. Instead, you could start saving a copy of everything you
  tweet through sockethub onto your remoteStorage from now on. But to export your contacts,
  if there are not too many, you can simply scrape <a href="https://twitter.com/following">https://twitter.com/following</a> and
  <a href="https://twitter.com/followers">https://twitter.com/followers</a> by
 opening the web console (Ctrl-Shift-K in Firefox), and pasting:
<pre><code>
  var screenNames = [],
    accounts = document.getElementsByClassName('account');
  for(var i=0; i&lt;accounts.length; i++) {
    screenNames.push(
        accounts[i].getAttribute('data-screen-name'));
  }
  alert(screenNames);
</code></pre>
<p>Do make sure you scroll down first to get all the accounts in view.
  You could also go through the api of course (see <a href="../5/Facebook-and-Twitter-from-nodejs.html">episode 5</a>), and nowadays Twitter also lets you download a zip file from the <a href="https://twitter.com/settings/account">account settings</a>.</p>

  <h3>Converting your data to web-ready format</h3>
  <p>Although you probably want to keep the originals as well, it makes sense to convert all your photos to a 50Kb "web size". If
    you followed <a href="../3/Setting-up-your-personal-server.html">episode 3</a>, then you have an Indie Web server with end-to-end
    encryption (TLS), so you can safely share photos with your friends by uploading them to unguessable URLs there. It makes sense
    to throttle 404s when you do this, although even if you don't, as long as the URLs are long enough, it is pretty unlikely that anybody
    would successfully guess them within the lifetime of our planet.</p>
  <p>In order to be able to play music with your browser, you need to convert your music and sound files to a format that your browser of
    choice supports, for instance ogg. On unix you can use the <code>avconv</code> tool for this (previously known as <code>ffmpeg</code>):</p>
<pre><code>
    for i in `ls */*/*` ; do
      echo avconv -i $i -acodec libvorbis -aq 60 \
        ~/allmydata/mediaCache/$i.ogg ;
     done | sh
</code></pre>

    <p>To convert your videos to ogg, you could try something like:</p>
<pre><code>
    for i in `ls *.AVI` ; do
      echo avconv -i $i -f ogg \
        ~/allmydata/souvenirs/$i.ogg ;
    done | sh
</code></pre>
<p>I had some trouble with the resulting video quality, and sound didn't work for some files, but that is a matter of playing around with the
  media conversion software on your computer until you get it the way you want it.</p>
  
  <h3>Playing your music through your browser</h3>
  <p>If you're setting up your remoteStorage server to serve your music files, then make sure you put them under <code>/public/music/</code> on your
    remoteStorage, so you can use Fran√ßois' <a href="https://music-unhosted.5apps.com/">Unhosted Music Player</a>. Otherwise,
you can also store your music in IndexedDB using Mozilla's <a href="http://mozilla.github.io/localForage/#setitem">localForage</a> library, or use <code>file:///</code>
    URLs to play your music. In the folder containing the files, simply add an html file that acts as a playlist app for them:
<pre><code>
&lt;!DOCTYPE html>
&lt;html lang="en">
  &lt;head>
    &lt;meta charset="utf-8" />
    &lt;title>Yo Skrill, drop it hard (playlist)</title>
  &lt;/head>
  &lt;body>
    &lt;h1>Programming</h1>
    &lt;audio id="player"></audio>
    &lt;ul id="playlist"></ul>
  &lt;/body>
  &lt;script>
    var songs = [
      '99 problems.ogg',
      'skrillex.ogg',
      'minimal.ogg'
    ];
    var i=0;    
    document.getElementById('player').controls=false;
    
    function go() {
      document.getElementById('player').src=songs[i];
      document.getElementById('player').play();
      var str ='';
      for(var j=0; j&lt;songs.length; j++) {
        if(j==i) {
          str += '&lt;li>&lt;strong>'+songs[j]+'&lt;/strong>(playing)';
        } else {
          str += '&lt;li>'+songs[j]+'&lt;input type="submit" '
              + 'value="play" onclick="i='+j+'; go();" />&lt;/li>';
        }
      }
      document.getElementById('playlist').innerHTML = str;
    }
    
    document.querySelector('audio')
        .addEventListener('pause', function() {
      i = (i+1) % songs.length;
      go();
    }, false);
    go();
  &lt;/script>
&lt;/html>
</code></pre>
<h3>Use html to organize your data</h3>
<p>Remember, it's the web. You drive. You can easily add html pages similar to the music playlist above, to create your own
  photo album designs. You can create photo albums that mix videos in them, using the html5 <code>&lt;video></code> tag,
  and even add css animations, svg graphics, 3D effects, and interactive navigation features to your photo albums and 
  souvenir scrapbooks. Maybe 
  even make some sound recordings when you are on holiday, and add them into your next
  "photo album".</p>
<p>I also found that so far, it has been far more important to me to have all my imported contacts in <em>some</em> format
  on my remoteStorage, even if it is just a text file that I search through with Ctrl-F, than to necessarily have a polished
  app for each task. I also use javascript a lot to, for instance, read in csv files and do some spreadsheet calculations on
  them.</p>
<p>A lot of the applications we usually assume are necessary on a computer (spreadsheets are a prime example) become irrelevant as soon as
  you learn how to develop your own unhosted web apps. And having the power of the web at your own fingertips, instead of being
  tied to what software providers give you, also gives a satisfying feeling of freedom and opportunity. And it makes being a
  member of the No Cookie Crew so much more fun! :)</p>
<p><a href="https://groups.google.com/d/topic/unhosted/WBJBToqMvwk/discussion">Comments welcome!</a></p>

      <p>Next: <a href="../9/Sending-and-receiving-email-from-unhosted-web-apps.html">Sending and receiving email from unhosted web apps</a></p>    </article>      
	
    <div class="logo">
      <img src="../../img/island-color.png" />
    </div>
    
    <nav>
      <div>

<h4>Overview:</h4>
        <p> i. <a href="/">definition</a></p>
        <p> ii. <a href="/getting-started/">getting started</a></p>
        <p> iii. <a href="/apps/">example apps</a></p>
        <p> iv. <a href="/people/">people</a></p>
        <p> v. <a href="/events/">events</a></p>
        <p> vi. <a href="/tools/">dev tools</a></p>
        <p> vii. <a href="/using-solid/">using solid</a></p>
        <p> viii. <a href="https://groups.google.com/forum/#!forum/unhosted">forum</a></p>

<h4><a href="https://unhosted.org/book/">(all episodes as a book)</a></h4>


<h4>(<a href="https://unhosted.org/book.pdf">.pdf</a>)(<a href="https://unhosted.org/book.epub">.epub</a>)  (<a href="https://unhosted.org/book.mobi">.mobi</a>) </h4>

<h4>Adventures:</h4>
        <p> 1. <a href="/adventures/1/Personal-servers-and-unhosted-web-apps.html">intro</a></p>
        <p> 2. <a href="/adventures/2/An-unhosted-editor.html">editor</a></p>
        <p> 3. <a href="/adventures/3/Setting-up-your-personal-server.html">server</a></p>
        <p> 4. <a href="/adventures/4/WebSockets.html">WebSockets</a></p>
        <p> 5. <a href="/adventures/5/Facebook-and-Twitter-from-nodejs.html">social</a></p>
        <p> 6. <a href="/adventures/6/Controlling-your-server-over-a-WebSocket.html">webshell</a></p>
        <p> 7. <a href="/adventures/7/Adding-remote-storage-to-unhosted-web-apps.html">remoteStorage</a></p>
        <p><strong>8. your data</strong></p>
        <p> 9. <a href="/adventures/9/Sending-and-receiving-email-from-unhosted-web-apps.html">email</a></p>
        <p> 10. <a href="/adventures/10/Linking-things-together-on-the-world-wide-web.html">web linking</a></p>
        <p> 11. <a href="/adventures/11/App-hosting.html">app hosting</a></p>
        <p> 12. <a href="/adventures/12/App-discovery.html">app discovery</a></p>
        <p> 13. <a href="/adventures/13/Dealing-with-users-in-unhosted-web-apps.html">users</a></p>
        <p> 14. <a href="/adventures/14/Peer-to-peer-communication.html">p2p</a></p>
        <p> 15. <a href="/adventures/15/Unhosted-web-apps-and-OAuth.html">unhosted oauth</a></p>
        <p> 16. <a href="/adventures/16/Our-plan-to-save-the-web.html">save the web</a></p>

<h4>Decentralize:</h4>
        <p> 17. <a href="/decentralize/17/Cryptography.html">cryptography</a></p>
        <p> 18. <a href="/decentralize/18/Distributed-hash-tables.html">dht</a></p>
        <p> 19. <a href="/decentralize/19/BGP,-IP,-DNS,-HTTP,-TLS,-and-NAT.html">internet</a></p>
        <p> 20. <a href="/decentralize/20/Persona,-OpenID,-SAML,-WebID,-and-Webfinger.html">identity</a></p>
        <p> 21. <a href="/decentralize/21/Client-side-sessions,-origins,-browser-tabs,-and-WebIntents.html">browser sessions</a></p>
        <p> 22. <a href="/decentralize/22/How-to-locate-resources.html">search</a></p>
        <p> 23. <a href="/decentralize/23/Network-neutrality,-ubiquitous-wifi,-and-DRM.html">neutrality</a></p>
        <p> 24. <a href="/decentralize/24/Decentralizing-the-web-by-making-it-federated.html">federation</a></p>
        <p> 25. <a href="/decentralize/25/Anonymity.html">anonymity</a></p>
        <p> 26. <a href="/decentralize/26/Decentralized-reputation-systems.html">reputation</a></p>

<h4>Practice:</h4>
        <p> 27. <a href="/practice/27/Persisting-data-in-browser-storage.html">browser storage</a></p>
        <p> 28. <a href="/practice/28/Synchronizing-browser-storage-with-server-storage.html">sync</a></p>
        <p> 29. <a href="/practice/29/Offline-first-web-app-design.html">offline first</a></p>
        <p> 30. <a href="/practice/30/Backend-as-a-Service-platforms.html">baas</a></p>
        <p> 31. <a href="/practice/31/Allowing-the-user-to-choose-the-backend-server.html">per-user backend</a></p>
        <p> 32. <a href="/practice/32/Client-side-libraries-for-per-user-backend.html">per-user clients</a></p>
        <p> 33. <a href="/practice/33/Client-side-frontend-development.html">client-side frontend</a></p>
        <p> 34. <a href="/practice/34/Conclusions.html">conclusions</a></p>
      </div>
      
      <div>
        <h4>Author:</h4>
        <div class="logo">
          <img rel="author avatar" src="../../img/michiel.jpg" />
        </div>
        <p>
          <a rel="author" href="https://michielbdejong.com/">Michiel B. de Jong</a>
        </p>
      </div>
      
      <div>
        <h4>Supporters:</h4>
        <p>
          <a class="logo" href="http://nlnet.nl/">
            <img src="../../img/nlnet.png" />
          </a>
          &nbsp;
        </p>

        <p>
          <a class="logo" href="http://wauland.de/">
            <img src="../../img/wau.png" />
          </a>
          &nbsp;
        </p>

        <p>
          <a class="logo" href="http://www.gabrielweinberg.com/blog/2012/03/duckduckgo-foss-donations-2011.html">
            <img src="../../img/duckduckgo.jpg" />
          </a>
          &nbsp;
        </p>

        <p>
          and <a href="../../thankyou.html">many more</a>&hellip;
        </p>
      </div>
    </nav>
    
    <footer>
      <strong>You can follow</strong>
      <img src="../../img/twitter.png" /><a target="_blank" href="https://twitter.com/unhosted">@unhosted</a>
      <strong>on twitter and in</strong>
      <a href="/adventures/1/Personal-servers-and-unhosted-web-apps.html#follow">many other ways</a><strong>. So stay tuned! :)</strong>
      </strong>
    </footer>
  </body>
</html>
